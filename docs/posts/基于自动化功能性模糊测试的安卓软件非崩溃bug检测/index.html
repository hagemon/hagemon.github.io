<!DOCTYPE html>
<html lang="zh-cn" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  
  <title>基于自动化功能性模糊测试的安卓软件非崩溃bug检测</title>
  <meta property="og:title" content="基于自动化功能性模糊测试的安卓软件非崩溃bug检测" />
  <meta name="twitter:title" content="基于自动化功能性模糊测试的安卓软件非崩溃bug检测" />
  

  

  <meta name="author" content=""/>
  <meta property="og:site_name" content="Hagemon&#39;s Log" />
  <meta property="og:url" content="https://hagemon.github.io/posts/%E5%9F%BA%E4%BA%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9F%E8%83%BD%E6%80%A7%E6%A8%A1%E7%B3%8A%E6%B5%8B%E8%AF%95%E7%9A%84%E5%AE%89%E5%8D%93%E8%BD%AF%E4%BB%B6%E9%9D%9E%E5%B4%A9%E6%BA%83bug%E6%A3%80%E6%B5%8B/" />

  
  <meta name="twitter:card" content="summary" />

  
  <meta name="twitter:site" content="@oneFolder_" />
  <meta name="twitter:creator" content="@oneFolder_" />
  

  
  <meta property="og:type" content="article" />
  
  
  
  <meta name="generator" content="Hugo 0.96.0" />
  
    
  
  

  <link rel="stylesheet" href="https://hagemon.github.io/css/style.css" />
  
  <link rel="stylesheet" href="https://hagemon.github.io/css/custom.css">
  <link rel='icon' type='image/x-icon' href="https://hagemon.github.io/favicon.ico" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async>
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"]
    }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>

  
  

</head>

<body>
  <a href="#main" class="skip-link p-screen-reader-text">Skip to content</a>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;" aria-hidden="true"> <symbol id="icon-500px" viewBox="0 0 16 16"><g> <path d="M3.953 10.512a5.24 5.24 0 0 0 6.996 3.141c.625-.262 1.184-.641 1.666-1.122s.859-1.041 1.122-1.666c.272-.647.412-1.331.412-2.037s-.137-1.394-.412-2.037c-.262-.625-.641-1.184-1.122-1.666s-1.041-.859-1.666-1.122a5.226 5.226 0 0 0-2.037-.413c-.716 0-1.431.144-2.066.413-.509.216-1.372.769-1.875 1.291l-.003.003V.984h7.241c.262-.003.262-.372.262-.491 0-.122 0-.487-.266-.491H4.377a.343.343 0 0 0-.344.341v6.066c0 .197.244.338.472.384.444.094.544-.047.653-.197l.016-.019c.166-.247.681-.766.688-.772a4.262 4.262 0 0 1 3.037-1.25c1.147 0 2.222.444 3.028 1.25a4.245 4.245 0 0 1 1.256 3.019 4.236 4.236 0 0 1-1.25 3.019 4.336 4.336 0 0 1-3.047 1.25 4.136 4.136 0 0 1-2.159-.597l.003-3.688c0-.491.213-1.028.572-1.431a2.09 2.09 0 0 1 1.588-.716c.594 0 1.15.225 1.566.634.409.406.637.95.637 1.528a2.179 2.179 0 0 1-2.206 2.197c-.238 0-.672-.106-.691-.109-.25-.075-.356.272-.391.387-.134.441.069.528.109.541.397.125.659.147 1.003.147a3.173 3.173 0 0 0 3.169-3.169c0-1.734-1.422-3.144-3.166-3.144-.856 0-1.659.328-2.263.919-.575.566-.903 1.319-.903 2.069v.019c-.003.094-.003 2.306-.006 3.031l-.003-.003c-.328-.363-.653-.919-.869-1.488-.084-.222-.275-.184-.534-.103-.125.034-.469.141-.391.394zm3.722-.865c0 .106.097.2.156.253l.019.019c.1.097.194.147.281.147a.181.181 0 0 0 .131-.05c.044-.041.537-.544.588-.591l.553.55c.05.056.106.088.172.088.088 0 .184-.053.284-.156.238-.244.119-.375.063-.438l-.559-.559.584-.588c.128-.137.016-.284-.097-.397-.162-.162-.322-.206-.422-.112l-.581.581-.588-.588a.16.16 0 0 0-.113-.047c-.078 0-.172.053-.275.156-.181.181-.219.306-.125.406l.588.584-.584.584c-.053.05-.078.103-.075.156zm1.278-7.931c-.938 0-1.938.191-2.669.506a.207.207 0 0 0-.134.181.753.753 0 0 0 .069.337c.047.116.166.425.4.334a6.689 6.689 0 0 1 2.334-.444 6.35 6.35 0 0 1 2.469.497c.622.263 1.206.644 1.844 1.194a.22.22 0 0 0 .147.059c.125 0 .244-.122.347-.237.169-.191.287-.35.119-.509a6.858 6.858 0 0 0-2.1-1.356 7.326 7.326 0 0 0-2.825-.563zM14.006 13.3c-.113-.113-.209-.178-.294-.203s-.162-.006-.222.053l-.056.056a6.32 6.32 0 0 1-6.938 1.356 6.336 6.336 0 0 1-2.013-1.356 6.046 6.046 0 0 1-1.356-2.012c-.288-.713-.381-1.247-.413-1.422-.003-.016-.006-.028-.006-.037-.041-.206-.231-.222-.503-.178-.112.019-.459.072-.428.319v.006a7.261 7.261 0 0 0 2.04 3.994 7.266 7.266 0 0 0 10.288 0l.059-.059c.069-.084.134-.225-.159-.516z"/> </g></symbol> <symbol id="icon-codepen" viewBox="0 0 16 16"><g> <path d="M14.777 5.751l-7-4.667a.5.5 0 0 0-.555 0l-7 4.667a.501.501 0 0 0-.223.416v4.667c0 .167.084.323.223.416l7 4.667a.5.5 0 0 0 .554 0l7-4.667a.501.501 0 0 0 .223-.416V6.167a.501.501 0 0 0-.223-.416zM7.5 10.232L4.901 8.5 7.5 6.768 10.099 8.5 7.5 10.232zM8 5.899V2.434l5.599 3.732L11 7.898l-3-2zm-1 0l-3 2-2.599-1.732L7 2.435V5.9zM3.099 8.5L1 9.899V7.101L3.099 8.5zM4 9.101l3 2v3.465l-5.599-3.732L4 9.102zm4 2l3-2 2.599 1.732L8 14.565V11.1zM11.901 8.5L14 7.101v2.798L11.901 8.5z"/> </g></symbol> <symbol id="icon-dribbble" viewBox="0 0 16 16"><g> <path d="M8 16c-4.412 0-8-3.588-8-8s3.587-8 8-8c4.412 0 8 3.587 8 8s-3.588 8-8 8zm6.747-6.906c-.234-.075-2.116-.634-4.256-.291a29.7 29.7 0 0 1 1.328 4.872 6.845 6.845 0 0 0 2.928-4.581zM10.669 14.3c-.103-.6-.497-2.688-1.456-5.181-.016.006-.031.009-.044.016-3.856 1.344-5.241 4.016-5.362 4.266a6.807 6.807 0 0 0 6.863.9zm-7.747-1.722c.156-.266 2.031-3.369 5.553-4.509a7.04 7.04 0 0 1 .269-.081 24.04 24.04 0 0 0-.553-1.159c-3.409 1.022-6.722.978-7.022.975-.003.069-.003.138-.003.209 0 1.753.666 3.356 1.756 4.566zM1.313 6.609c.306.003 3.122.016 6.319-.831a43.092 43.092 0 0 0-2.534-3.953 6.854 6.854 0 0 0-3.784 4.784zM6.4 1.366a36.612 36.612 0 0 1 2.55 4c2.431-.909 3.459-2.294 3.581-2.469A6.799 6.799 0 0 0 6.4 1.366zm6.891 2.325c-.144.194-1.291 1.663-3.816 2.694.159.325.313.656.453.991.05.119.1.234.147.353 2.275-.284 4.534.172 4.759.219a6.816 6.816 0 0 0-1.544-4.256z"/> </g></symbol> <symbol id="icon-facebook" viewBox="0 0 16 16"><g> <path d="M9.5 3H12V0H9.5C7.57 0 6 1.57 6 3.5V5H4v3h2v8h3V8h2.5l.5-3H9V3.5c0-.271.229-.5.5-.5z"/> </g></symbol> <symbol id="icon-feed" viewBox="0 0 16 16"><g> <path d="M2.13 11.733c-1.175 0-2.13.958-2.13 2.126 0 1.174.955 2.122 2.13 2.122a2.126 2.126 0 0 0 2.133-2.122 2.133 2.133 0 0 0-2.133-2.126zM.002 5.436v3.067c1.997 0 3.874.781 5.288 2.196a7.45 7.45 0 0 1 2.192 5.302h3.08c0-5.825-4.739-10.564-10.56-10.564zM.006 0v3.068C7.128 3.068 12.924 8.87 12.924 16H16C16 7.18 8.824 0 .006 0z"/> </g></symbol> <symbol id="icon-flickr" viewBox="0 0 16 16"><g> <path d="M0 8.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0zm9 0a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/> </g></symbol> <symbol id="icon-github" viewBox="0 0 16 16"><g> <path d="M8 .198a8 8 0 0 0-2.529 15.591c.4.074.547-.174.547-.385 0-.191-.008-.821-.011-1.489-2.226.484-2.695-.944-2.695-.944-.364-.925-.888-1.171-.888-1.171-.726-.497.055-.486.055-.486.803.056 1.226.824 1.226.824.714 1.223 1.872.869 2.328.665.072-.517.279-.87.508-1.07-1.777-.202-3.645-.888-3.645-3.954 0-.873.313-1.587.824-2.147-.083-.202-.357-1.015.077-2.117 0 0 .672-.215 2.201.82A7.672 7.672 0 0 1 8 4.066c.68.003 1.365.092 2.004.269 1.527-1.035 2.198-.82 2.198-.82.435 1.102.162 1.916.079 2.117.513.56.823 1.274.823 2.147 0 3.073-1.872 3.749-3.653 3.947.287.248.543.735.543 1.481 0 1.07-.009 1.932-.009 2.195 0 .213.144.462.55.384A8 8 0 0 0 8.001.196z"/> </g></symbol> <symbol id="icon-gitlab" viewBox="0 0 28 28"><g> <path d="M1.625 11.031L14 26.89.437 17.046a1.092 1.092 0 0 1-.391-1.203l1.578-4.813zm7.219 0h10.313L14.001 26.89zM5.75 1.469l3.094 9.562H1.625l3.094-9.562a.548.548 0 0 1 1.031 0zm20.625 9.562l1.578 4.813a1.09 1.09 0 0 1-.391 1.203l-13.563 9.844 12.375-15.859zm0 0h-7.219l3.094-9.562a.548.548 0 0 1 1.031 0z"/> </g></symbol> <symbol id="icon-google-plus" viewBox="0 0 16 16"><g> <path d="M5.091 7.147v1.747h2.888c-.116.75-.872 2.197-2.888 2.197-1.737 0-3.156-1.441-3.156-3.216s1.419-3.216 3.156-3.216c.991 0 1.65.422 2.028.784L8.5 4.112c-.888-.828-2.037-1.331-3.409-1.331C2.275 2.784 0 5.059 0 7.875s2.275 5.091 5.091 5.091c2.937 0 4.888-2.066 4.888-4.975 0-.334-.037-.591-.081-.844H5.092zM16 7h-1.5V5.5H13V7h-1.5v1.5H13V10h1.5V8.5H16z"/> </g></symbol> <symbol id="icon-instagram" viewBox="0 0 22 22"><g> <path d="M15.445 0H6.554A6.559 6.559 0 0 0 0 6.554v8.891A6.559 6.559 0 0 0 6.554 22h8.891a6.56 6.56 0 0 0 6.554-6.555V6.554A6.557 6.557 0 0 0 15.445 0zm4.342 15.445a4.343 4.343 0 0 1-4.342 4.342H6.554a4.341 4.341 0 0 1-4.341-4.342V6.554a4.34 4.34 0 0 1 4.341-4.341h8.891a4.342 4.342 0 0 1 4.341 4.341l.001 8.891z"/> <path d="M11 5.312A5.693 5.693 0 0 0 5.312 11 5.694 5.694 0 0 0 11 16.688 5.694 5.694 0 0 0 16.688 11 5.693 5.693 0 0 0 11 5.312zm0 9.163a3.475 3.475 0 1 1-.001-6.95 3.475 3.475 0 0 1 .001 6.95zm5.7-10.484a1.363 1.363 0 1 1-1.364 1.364c0-.752.51-1.364 1.364-1.364z"/> </g></symbol> <symbol id="icon-linkedin" viewBox="0 0 16 16"><g> <path d="M6 6h2.767v1.418h.04C9.192 6.727 10.134 6 11.539 6 14.46 6 15 7.818 15 10.183V15h-2.885v-4.27c0-1.018-.021-2.329-1.5-2.329-1.502 0-1.732 1.109-1.732 2.255V15H6V6zM1 6h3v9H1V6zM4 3.5a1.5 1.5 0 1 1-3.001-.001A1.5 1.5 0 0 1 4 3.5z"/> </g></symbol> <symbol id="icon-mail" viewBox="0 0 22 18"><g> <path fill="#000" d="M0 17.225V.776h22v16.447H0v.002zm3.011-1.815h15.978l-5.111-5.115L11 13.179l-2.877-2.883-5.112 5.114zm-1.216-1.275l5.077-5.09L1.795 3.98v10.155zm13.332-5.09l5.079 5.09V3.979l-5.079 5.066zm-4.126 1.588l8.022-8.027-16.045-.001 8.023 8.028z"/> </g></symbol> <symbol id="icon-medium" viewBox="0 0 24 24"><g> <path d="M22.085 4.733L24 2.901V2.5h-6.634l-4.728 11.768L7.259 2.5H.303v.401L2.54 5.594c.218.199.332.49.303.783V16.96c.069.381-.055.773-.323 1.05L0 21.064v.396h7.145v-.401l-2.52-3.049a1.244 1.244 0 0 1-.347-1.05V7.806l6.272 13.659h.729l5.393-13.659v10.881c0 .287 0 .346-.188.534l-1.94 1.877v.402h9.412v-.401l-1.87-1.831a.556.556 0 0 1-.214-.534V5.267a.554.554 0 0 1 .213-.534z"/> </g></symbol> <symbol id="icon-npm" viewBox="0 0 16 16"><g> <path d="M0 0v16h16V0H0zm13 13h-2V5H8v8H3V3h10v10z"/> </g></symbol> <symbol id="icon-pinterest" viewBox="0 0 16 16"><g> <path d="M8 1.069a6.93 6.93 0 0 0-2.525 13.384c-.059-.547-.116-1.391.025-1.988.125-.541.813-3.444.813-3.444s-.206-.416-.206-1.028c0-.963.559-1.684 1.253-1.684.591 0 .878.444.878.975 0 .594-.378 1.484-.575 2.306-.166.691.344 1.253 1.025 1.253 1.231 0 2.178-1.3 2.178-3.175 0-1.659-1.194-2.819-2.894-2.819-1.972 0-3.128 1.478-3.128 3.009 0 .597.228 1.234.516 1.581.056.069.066.128.047.2a95.89 95.89 0 0 1-.194.787c-.031.128-.1.153-.231.094-.866-.403-1.406-1.669-1.406-2.684 0-2.188 1.587-4.194 4.578-4.194 2.403 0 4.272 1.712 4.272 4.003 0 2.388-1.506 4.313-3.597 4.313-.703 0-1.362-.366-1.588-.797 0 0-.347 1.322-.431 1.647-.156.603-.578 1.356-.862 1.816a6.93 6.93 0 0 0 8.984-6.622 6.931 6.931 0 0 0-6.931-6.934z"/> </g></symbol> <symbol id="icon-search" viewBox="0 0 16 16"><g> <path d="M15.504 13.616l-3.79-3.223c-.392-.353-.811-.514-1.149-.499a6 6 0 1 0-.672.672c-.016.338.146.757.499 1.149l3.223 3.79c.552.613 1.453.665 2.003.115s.498-1.452-.115-2.003zM6 10a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/> </g></symbol> <symbol id="icon-strava" viewBox="0 0 24 24"><g> <path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169"/> </g></symbol> <symbol id="icon-tumblr" viewBox="0 0 16 16"><g> <path d="M9.001 7v3.659c0 .928-.012 1.463.086 1.727.098.262.342.534.609.691.354.212.758.318 1.214.318.81 0 1.289-.107 2.09-.633v2.405a9.089 9.089 0 0 1-1.833.639A7.93 7.93 0 0 1 9.369 16a4.9 4.9 0 0 1-1.725-.276 4.195 4.195 0 0 1-1.438-.79c-.398-.343-.672-.706-.826-1.091s-.23-.944-.23-1.676V6.556H3.003V4.29c.628-.204 1.331-.497 1.778-.877a4.386 4.386 0 0 0 1.08-1.374C6.133 1.505 6.32.825 6.422 0h2.579v4H13v3H9.001z"/> </g></symbol> <symbol id="icon-twitter" viewBox="0 0 16 16"><g> <path d="M16 3.538a6.461 6.461 0 0 1-1.884.516 3.301 3.301 0 0 0 1.444-1.816 6.607 6.607 0 0 1-2.084.797 3.28 3.28 0 0 0-2.397-1.034 3.28 3.28 0 0 0-3.197 4.028 9.321 9.321 0 0 1-6.766-3.431 3.284 3.284 0 0 0 1.015 4.381A3.301 3.301 0 0 1 .643 6.57v.041A3.283 3.283 0 0 0 3.277 9.83a3.291 3.291 0 0 1-1.485.057 3.293 3.293 0 0 0 3.066 2.281 6.586 6.586 0 0 1-4.862 1.359 9.286 9.286 0 0 0 5.034 1.475c6.037 0 9.341-5.003 9.341-9.341 0-.144-.003-.284-.009-.425a6.59 6.59 0 0 0 1.637-1.697z"/> </g></symbol> <symbol id="icon-vimeo" viewBox="0 0 16 16"><g> <path d="M15.994 4.281c-.072 1.556-1.159 3.691-3.263 6.397-2.175 2.825-4.016 4.241-5.522 4.241-.931 0-1.722-.859-2.366-2.581-.431-1.578-.859-3.156-1.291-4.734-.478-1.722-.991-2.581-1.541-2.581-.119 0-.538.253-1.256.753l-.753-.969c.791-.694 1.569-1.388 2.334-2.081 1.053-.909 1.844-1.387 2.372-1.438 1.244-.119 2.013.731 2.3 2.553.309 1.966.525 3.188.647 3.666.359 1.631.753 2.447 1.184 2.447.334 0 .838-.528 1.509-1.588.669-1.056 1.028-1.862 1.078-2.416.097-.912-.262-1.372-1.078-1.372a2.98 2.98 0 0 0-1.184.263c.787-2.575 2.287-3.825 4.506-3.753 1.641.044 2.416 1.109 2.322 3.194z"/> </g></symbol> <symbol id="icon-wordpress" viewBox="0 0 16 16"><g> <path d="M2 8c0 2.313 1.38 4.312 3.382 5.259L2.52 5.622A5.693 5.693 0 0 0 2 8zm10.05-.295c0-.722-.266-1.222-.495-1.612-.304-.482-.589-.889-.589-1.371 0-.537.418-1.037 1.008-1.037.027 0 .052.003.078.005A6.064 6.064 0 0 0 8 2.156 6.036 6.036 0 0 0 2.987 4.79c.141.004.274.007.386.007.627 0 1.599-.074 1.599-.074.323-.018.361.444.038.482 0 0-.325.037-.687.055l2.185 6.33 1.313-3.835-.935-2.495a12.304 12.304 0 0 1-.629-.055c-.323-.019-.285-.5.038-.482 0 0 .991.074 1.58.074.627 0 1.599-.074 1.599-.074.323-.018.362.444.038.482 0 0-.326.037-.687.055l2.168 6.282.599-1.947c.259-.809.457-1.389.457-1.889zm-3.945.806l-1.8 5.095a6.148 6.148 0 0 0 3.687-.093.52.52 0 0 1-.043-.081L8.105 8.511zm5.16-3.315c.026.186.04.386.04.601 0 .593-.114 1.259-.456 2.093l-1.833 5.16c1.784-1.013 2.983-2.895 2.983-5.051a5.697 5.697 0 0 0-.735-2.803zM8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm0 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14z"/> </g></symbol> <symbol id="icon-youtube" viewBox="0 0 16 16"><g> <path d="M15.841 4.8s-.156-1.103-.637-1.587c-.609-.637-1.291-.641-1.603-.678-2.237-.163-5.597-.163-5.597-.163h-.006s-3.359 0-5.597.163c-.313.038-.994.041-1.603.678C.317 3.697.164 4.8.164 4.8S.005 6.094.005 7.391v1.213c0 1.294.159 2.591.159 2.591s.156 1.103.634 1.588c.609.637 1.409.616 1.766.684 1.281.122 5.441.159 5.441.159s3.363-.006 5.6-.166c.313-.037.994-.041 1.603-.678.481-.484.637-1.588.637-1.588s.159-1.294.159-2.591V7.39c-.003-1.294-.162-2.591-.162-2.591zm-9.494 5.275V5.578l4.322 2.256-4.322 2.241z"/> </g></symbol></svg>
  <header class="l-header">
    
    <p class="c-title p-title"><a href="https://hagemon.github.io/" class="p-title__link">Hagemon&#39;s Log</a></p>
    
    
  </header>

<nav class="l-nav p-menu">
  <ul class="p-menu__lists">
    
      
      <li class="p-menu__listitem">
        <a href="/">About</a>
      </li>
      
    
      
      <li class="p-menu__listitem">
        <a href="/posts">Blog</a>
      </li>
      
    
      
      <li class="p-menu__listitem">
        <a href="/tags">Tags</a>
      </li>
      
    
  </ul>
</nav>


  <main id="main" class="l-main">


<article class="p-article">
  <header>
    <h1>基于自动化功能性模糊测试的安卓软件非崩溃bug检测</h1>
    
    <div>
        <div class="c-meta">
        
           Posted on
<time datetime="2022-08-08T21:52:15&#43;08:00">
  Aug 8, 2022
</time>

        
        
        
        </div>
      </div>
      
      <a href="https://hagemon.github.io/tags/software-analyze-and-testing" class="c-tag">Software Analyze and Testing</a>
      
    </div>
    
  </header>
  
  <section id="js-article" class="p-article__body">
    <p>文章<a href="https://tingsu.github.io/files/oopsla21-Genie.pdf">Fully Automated Functional Fuzzing of Android Apps for Detecting Non-Crashing Logic Bugs</a>的笔记，作者是Ting Su老师。</p>
<h2 id="概述">概述</h2>
<p>目前的测试工具大多用于检测引起崩溃（crash）的bug，而缺乏一个自动化检测非崩溃性bug（non-crashing bugs）的方法。引发这些非崩溃性bug的主要原因通常是软件的实现逻辑有误，从而导致GUI的显示没有达到预期。</p>
<p>目前要解决非崩溃的功能性问题，主要面临两个挑战：</p>
<ol>
<li>需要大量的经验和人力。</li>
<li>缺少test oracles以实现自动化测试。</li>
</ol>
<p>本文基于<strong>蜕变测试</strong>（metamorphic testing）的思想，提出了一种<strong>独立页面模糊测试</strong>（independent view fuzzing）来解决这个问题。其核心思想利用了<strong>页面之间的独立性</strong>，在随机生成的种子测试用例（seed tests，下文简称seeds）上，额外增加一系列独立的事件，从而构建变种测试用例（mutated tests，下文简称mutants）。对于mutants来说，其表现应该与seeds具有一致性，蜕变测试方法通过检验这种一次性来判断软件是否有功能性问题。</p>
<p>所谓页面独立性，指的是对于同一个父组件上平行的组件（如ListView中并排的按钮），或不属于同一个父组件的组件（如ListView的按钮和导航栏的按钮）在功能上应该相互独立。对于其中一个组件的操作不会影响其它组件的正常功能。本文称其为独立页面属性（Independent View Properties）。</p>
<p>给予独立性的概念，mutants和seeds的执行情况应该要保持一致，否则就认定为出现了功能性问题。</p>
<p>本文构建了自动化功能模糊测试工具<strong>GENIE</strong>，在给定一个软件后，GINIE可以做到：</p>
<ol>
<li>在不需要认为设计测试用例的情况下，自动检测非崩溃bug。</li>
<li>检测到的bug具有多样性和通用性，在多个功能属性上皆有效果。</li>
</ol>
<h3 id="独立页面属性">独立页面属性</h3>
<p>举例来说明独立页面属性：ActivityDiary应用可以记录每日生活中的照片，这些照片可以被分为多个类别（电影、睡觉、做清洁等）。用户在选择一个类别后，可以上传照片并发布到Diary页。在Dairy页面中，可以对已发布的照片执行删除操作。具体场景如下图描述：</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4zp315khpj220y0f4tde.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h4zp315khpj220y0f4tde.jpg"></p>
<p>初始状态为$l_1$，用户按照以下的流程（记为流程A）操作进行状态转移：</p>
<ol>
<li>点击Cinema按钮，新增一个Cinema主题的日记，状态转移到$l_2$。</li>
<li>点击相机按钮，选择一张图片后，图片加载到页面上，状态转移至$l_3$。</li>
<li>点击导航栏，返回日记页面，页面显示Cinema标题和图片内容，状态转移至$l_4$。</li>
<li>点击图片，弹出删除对话框，状态转移至$l_5$。</li>
<li>点击确认删除，页面上图片被删除，仅保留Cinema标题，状态转移至$l_6$，流程终止。</li>
</ol>
<p>从直觉来说，若在删除Cinema的图片之前添加一个Sleeping或Cleaning的日记，对Cinema图片的删除流程是不会有影响的，<em><strong>这里就体现了页面之间的独立关系</strong></em>。将上述流程作为seeds，我们可以生成一个mutants：</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h50b1u22gpj21z80tc7cr.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h50b1u22gpj21z80tc7cr.jpg"></p>
<p>该流程（记为流程B）表示为：</p>
<ol>
<li>在$l_3$时，点击Cleaning按钮，新增一个Cleaning主题的日记，状态转移至$u_1$。</li>
<li>点击相机按钮，选择一张图片，图片加载到页面上，状态转移至$u_2$。</li>
<li>点击导航栏，返回日记页面，页面显示Cleaning和Cinema标题和对应的图片内容，状态转移至$l_4&rsquo;$。</li>
<li>点击Cinema对应的图片，弹出删除对话框，状态转移至$l_5&rsquo;$。</li>
<li>确认删除，此时可能会出现两种情况：
<ol>
<li>Cinema图片被成功删除，仅保留Cleaning日记及Cinema标题，状态转移至$l_6&rsquo;$，流程结束。</li>
<li>Cleaning图片被删除，页面保留Cinema日记内容及Cleaning的标题，状态转移至$u_6$，此时页面间的独立性被破坏，检测到功能问题。</li>
</ol>
</li>
</ol>
<p>总结来说，正常情况下，在相对一个流程（如流程A）新增一些操作后（如流程B中新建Cleaning日记），原有流程的后续操作（如删除Cinema图片）是不会影响其它组件的（如Cleaning的图片不会被删除）。否则就出现了功能性问题（如Cleaning的图片反而被删除）。</p>
<p>在本例中，独立页面属性体现在：“额外增加一个Cleaning的日记后，对删除Cinema的图片不会造成影响”。这种独立页面属性是广泛存在于安卓软件中的：本文调查了5个有名的、不同类别的且拥有百万下载量的安卓软件，从他们的bug reports中找到129的非崩溃bug，其中有38个（29.5%）体现了独立页面属性，所以该项研究对寻找到这些大量存在的问题是有一定帮助的。</p>
<p>针对以上流程，可以引出了几个关键问题：</p>
<ol>
<li>我们如何去生成这些seeds？</li>
<li>我们如何生成mutants，以至于可以让额外的事件序列可以体现出页面独立属性？</li>
<li>我们如何去衡量mutants的操作结果和seeds的操作结果存在不一致，即mutants是否影响了正常的</li>
</ol>
<h3 id="问题和主要思路独立页面属性模糊测试">问题和主要思路（独立页面属性模糊测试）</h3>
<p>为解决上述的问题，本文的主要步骤包括：</p>
<ol>
<li>构建<strong>图结构</strong>的GUI转移模型（GUI transitional model ），其中图的节点是经过量化的页面的状态，图的边时引发状态转移的操作事件。</li>
<li>根据转移模型，生成一系列seeds。分析seeds中每个页面的布局，以树的形式描绘布局中每个页面间的关系，根据一定的规则找到具有相互独立属性的页面。这些页面往往具有相似的功能，但是在行为上是相互独立的。</li>
<li>利用seeds和转移模型，在seeds中找到一个“支点节点（pivot）”，并且在转移模型中找到一个环路，使其在执行若干个操作事件后可以回到支点节点。这个环路就是mutants中的额外操作事件。</li>
<li>对比seeds和对应mutants是否存在差异，从而判断是否有违背页面独立属性的情况。</li>
</ol>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h50tk1egkxj21vc0iqq7z.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h50tk1egkxj21vc0iqq7z.jpg"></p>
<h2 id="实现方式">实现方式</h2>
<h3 id="符号定义">符号定义</h3>
<p>安卓App以GUI为中心，依靠事件驱动GUI的变化。本文将一个App定义为$P$，App中的GUI布局定义为$l$，并用树形结构$T$来表示页面构成情况。树中的每一个节点是一个GUI页面（或组件），记为$w$（于是$w\in l$）。每一个页面$w$拥有一种类型，记为$w.type$，并且：</p>
<ul>
<li>对于叶节点，它的类型可以是按钮（Button）或者文本框（EditText）</li>
<li>对于内部节点，它的类型可以是列表页面（ListView）或线形布局页面（LinearLayout）等，我们统称为group view。</li>
</ul>
<p>如果$P$不在前台运行，则本文定义$l=\bot$。</p>
<p>GUI事件$e=&lt;t,r,o&gt;$是一个三元组，其中$e.t$表示事件$e$的类型（如点击、编辑、轻扫）；$e.r$是一个函数，参数为某个布局，返回值为在这个布局上执行了$e$的页面，即$e.r(l)=w$表示在布局$l$中的页面$w$执行事件了$e$；$e.o$表示与事件$e$相关联的数据，这是个可选的属性。</p>
<p>于是一个GUI测试用例可以用一个事件序列$E=[e_1,e_2\dots,e_n]$来表示。在$P$上执行$E$可以得到一个执行过程$\prod_p(E)=&lt;L,I,H&gt;$，其中$L=[l_1,l_2,\dots,l_{n+1}]$是过程中变化的页面布局，$I$和$H$分别记录了每个布局中的独立页面和当前活跃的页面（active view）。于是$l_{i+1}=e_i(l_i)$可以表示事件对页面布局的驱动过程。</p>
<h3 id="构建gui转移模型">构建GUI转移模型</h3>
<p>GUI转移模型用于生成测试用例序列，用$M=&lt;S,\Sigma,\delta&gt;$表示。其中$S$是所有抽象状态$s$的集合，且$S$是$L$中布局们的子集（因为不同的布局可能属于同一种状态）；$\Sigma$表示$P$能够接受的所有事件的合集；$\delta :S\times \Sigma \rightarrow S$表示“状态经过事件后，转移到新的状态“这一映射转移关系，每一个转移可以用元组$&lt;s,e,s&rsquo;&gt;\in \delta$来表示。</p>
<p>本文使用了一种C-Lv4的变体来衡量布局$l$和$l&rsquo;$之间的差异。具体来说，本文将布局$l$表示为它组件的集合${w_1, w_2, \dots,w_{|l|}}$，并且将布局$l$抽象为$l_{abs}=\cup_{w}\in {w.type}$，即将页面树结构中的页面用类型来表示，这样做时为了减少状态数量有指数爆炸的威胁。当两个布局的抽象相等时$l_{abs}=l&rsquo;_{abs}$，认为两个布局相等，记为$l\simeq l&rsquo;$。</p>
<p>举例来说，当两个布局的结点存在差异时，则判断两个布局不相等，如$l_3$比$l_2$多出了一个imageView结点；而对于ListView这种可以包含零至多个结点的group view，若两个布局只在子节点的个数上有差异，而每个子节点没有差异，则认定为两个布局相等，如$l_4$与$l_4&rsquo;$中，ListView子节点个数有差异，但每个子节点的类型都是一致的，所以两者相等。</p>
<p>为了能生成更合理的事件序列，本文提出了一种State Coverage-optimized Model Mining算法。对于GUI分布$l$，遍历其所有页面，找到各页面可以执行的事件$e$并执行，从而转移至新的分布$l&rsquo;$，以此类推从而构成图。在这个过程中，如果找到任意一对$l_{abs}\simeq l&rsquo;_{abs}$，则$M$中会出现一个环形，这个环形结构在后续的mutants生成中有着重要的作用。其中，对于事件的选择按照以下两个策略实现：</p>
<ul>
<li>
<p>系统性事件选择（Systematic event selection）：该策略优先考虑了较少被执行到的，且能够转移到较多新布局的事件。具体地，用$\Upsilon(e)$表示事件$e$的权重，本文为seeds中出现过的所有事件$e$存储一份权重，用于使用和更新：</p>
<p>$$
\Upsilon_{i+1}{(e)}=\frac{\Upsilon_{i}(e)+\sum \Upsilon_i(new_events(e))}{exec_times(e)^2}
$$</p>
<p>其中，$new_events(\cdot)$表示在$e$执行后的布局$l&rsquo;$上，曾经执行过的所有事件的集合（即图模型中状态$s$的出度）；$exec_times(\cdot)$表示事件$e$总共被执行过的次数。初始状态下，$\Upsilon_1(e)=100$、$exec_times(e)=1$、$new_events(e)=\empty$。</p>
</li>
<li>
<p>随机事件选择（Random event selection）：根据预定义的概率选择事件，其中点击事件概率为60%、长按事件为35%、导航事件为5%。随机事件选择可以减少探索过程中陷入重复选择的情况，如在一个很长的<em>ListView</em>中可能点击多个相似的组件。</p>
</li>
</ul>
<p>在具体实现时，首先基于系统性事件选择进行探索，之后交替两种策略构建seeds。这样可以构建出一个图模型：</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h54ygie6h2j20yy0u00vs.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h54ygie6h2j20yy0u00vs.jpg"></p>
<h3 id="从seeds中确定独立页面和活跃状态">从Seeds中确定独立页面和活跃状态</h3>
<p>为了要知道在生成mutants时，哪些组件和事件可以作为起点。以上面的例子来说，即在已知$l_2$与随后的“Cinema点击事件”的情况下，找到与点击Cinema平行且相互独立的“Cleaning点击事件”。</p>
<p>为了做到这点，我们需要知道在seeds中有哪些相互平行、互不干扰的组件（比如他们是同一个列表的两个按钮，或是不同列表的按钮）。同时，我们也应该知道在seeds中有哪些组件已经被事件影响了（比如Cinema已经被点击过了）。</p>
<p>于是本章的重点在于定义“页面相互独立”的规则和记录已经发生时间为的方法。</p>
<p>对于页面相互独立的规则，布局$l$可以被分割为多个不重合的group views $G={w_{g_1},w_{g_2},\dots,w_{g_{n}}}$，其中$w_{g_{i}}\in l$表示布局中一个内部节点。令$\rm{Group}(w)$表示页面$w$所在的group（如按钮$w_1$在ListView $w_2$上，则有$\rm{Group}(w_1)=w_2$）。如果$w_1$和$w_2$两个页面满足以下两个条件：</p>
<ol>
<li>$w_1$和$w_2$属于不同的group，即$\rm{Group}(w_1)\ne \rm{Group}(w_2)$</li>
<li>$w_1$和$w_2$属于相同的group，即$\rm{Group}(w_1)=\rm{Group}(w_2)$，且它们的类型也相等，即$w_1.type=w_2.type$</li>
</ol>
<p>则$w_1\nparallel w_2$。</p>
<p>值得注意的是，若页面不属于任何一个group，则它独立于在其它group的页面。</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h534k88d8fj21060j8jva.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h534k88d8fj21060j8jva.jpg"></p>
<p>举例来说，图(d)展示了$l_1$布局的树形结构，其中$w_1$、$w_2$和$w_3$属于同一个group view（$w_0$），且为同类型的兄弟节点，于是它们相互独立。显然，点击其中一个组件，是不会影响到另外两个的；$w_6\nparallel w_1$，因为两者不属于同一个group；$w_4\nparallel w_1$，因为$w_4$不属于任何一个group。</p>
<p>图(e)中展示了$l_4&rsquo;$布局的树形结构。其中$w_4\nparallel w_1$，因为它们都是$w_0$的子节点。显然点击$w_6$也是不会影响到$w_3$的。</p>
<p>在确定独立规则后，本文还定义了Active View。具体来说，对于布局$l$的group view集合$G={w_{g_1},w_{g_2},\dots,w_{g_{n}}}$，定义一个映射结构$h_l\in H$，记录每个group view的活跃子页面，其规则如下：</p>
<ol>
<li>对于页面$w_i$，当一个事件$e$关于布局$l$满足$e.r(l)=w_i$时，认为$w_i$是其所在group的活跃页面，即令$h(\rm{Group}(w_i))=w_i$。</li>
<li>对于活跃页面$w_i$，当一个事件$e$关于布局$l$满足$e.r(l)=w_j$，且$\rm{Group}(w_i)=\rm{Group}(w_j)$时，页面$w_i$不再活跃（become inactive），即令$h(\rm{Group}(w_j))=w_j$。</li>
<li>对于页面$w_i$，当一个事件$e$关于布局$l$满足$e.r(l)=w_j$且$\rm{Group}(w_i)\ne \rm{Group}(w_j)$，则$w_i$的活跃情况不受影响，且有$h(\rm{Group}(w_j))=w_j$。</li>
</ol>
<p>另外，不属于任何一个group的页面被认为是不活跃的。</p>
<p>一个比较重要的点是，在seeds的生成过程中，我们需要记录每一个group view被点击过的页面，这样mutants在探索seeds过程中可以方便地知道每个group中有哪些页面被点击过了。</p>
<p>在更新活跃状态的过程中，GINIE会为每个布局$l$寻找与它最接近的<em><strong>相似布局</strong></em>，并在布局中寻找<em><strong>相似页面</strong></em>，从而<em><strong>更新状态</strong></em>。这里涉及两个问题：</p>
<ol>
<li>如何界定两个布局、两个页面之间是否相似</li>
<li>如何记录与更新页面的活跃状态</li>
</ol>
<p>**布局相似性：**对于第一个问题，若两个布局属于同一个主页面，则认为它们相似。本文使用Similar_layout_type($l_1,l_2$)函数反应两个布局是否相似，如示例中的$l_2$和$l_3$虽然页面结构不同，但都属于ActivityDariy这个主页面，所以认为他们是相似的布局。</p>
<p>**页面相似性：**对于页面来说，假设事件$e$作用于布局$l={w_1,\dots,w_{|l|}}$，且$l&rsquo;={w_1,\dots,w_{|l&rsquo;|}}$是另一个布局。显然此处有$e.r(l)=w_i$。如果此时存在$w_j&rsquo;\in l&rsquo;$，能够满足$e.r(l&rsquo;)=w_j$，即若$w_i$在$l$上可以被事件$e$作用，且$w_j$在$l&rsquo;$上也可以被事件$e$作用，则认为$w_i$和$w_j$相似，记为$w_i\sim w_j$。</p>
<p>具体来说，为了寻找是否存在$w_j\in l&rsquo;$和$w_i\in l$相似，本文将页面的类别信息转化为一个字符串，并于所有$w_j\in l&rsquo;$进行字符串对比，若没找到一致的，则计算字符串编辑距离，找到距离最近的那一个“最相似”的页面。</p>
<p>**活跃状态更新：**对于第二个问题，假设经过事件$e$后的布局为$l$，则从之前的所有布局序列中，按照倒序寻找第一个和$l$相似的布局$l_i$，从对应的$h_i={(w_{g_1},w_{a_1}), (w_{g_2},w_{a_2})\dots}$中，寻找是否存在$w_g&rsquo;$与$l$的某个group view $w_g$相似，且$w_g&rsquo;$的活跃页面$w_a&rsquo;=h[w_g&rsquo;]$与$l$中的某个节点$w_a$相似。若存在这种关系，则为布局$l$的活跃页面关系$h$添加$h[w_g&rsquo;]=w_a&rsquo;$。</p>
<p>总结来说，独立页面的确定与活跃状态的构建可以用以下流程表示：</p>
<ol>
<li>初始化空布局列表$L$、空独立页面列表$I$、空活跃状态列表$H$</li>
<li>获取GUI布局$l$，将其加入$L$；获取$l$上的独立页面，加入$I$</li>
<li>获取事件$e$</li>
<li>更新活跃状态$h=[Group(e.r(l))]=e.r(l)$，将$h$加入$H$中</li>
<li>执行事件$e$，获得新的GUI布局$l'$</li>
<li>执行update_active_views($l&rsquo;$,$&lt;L,I,H&gt;$)函数，更新当前的$h$</li>
<li>将$l&rsquo;$加入$L$，获取$l&rsquo;$上的独立页面，加入$I$</li>
<li>重复3-8</li>
</ol>
<p>其中update_active_views函数接收当前的布局$l$，以及历史的布局、独立页面和活跃状态的序列$&lt;L,I,H&gt;$。具体步骤如下：</p>
<ol>
<li>倒序遍历序列$&lt;l_i,h_i&gt;\in&lt;L,H&gt;$</li>
<li>如果当前布局$l$和$l_i$相似，则：
<ol>
<li>遍历每一个$&lt;w_g,w_a&gt;\in h_i$</li>
<li>若$l$中存在$w_g&rsquo;$，有$w_g&rsquo;\sim w_g$，且存在$w_a&rsquo;$，有$w_a&rsquo;\sim w_a$，则令当前的$h[w_g&rsquo;]=w_a'$</li>
</ol>
</li>
</ol>
<h3 id="mutants生成和执行">Mutants生成和执行</h3>
<p>Mutants生成的主要思想是，在原有的seeds中，能够找到一个起点（pivot）布局和一个事件序列$\tau$，使得$\tau$的第一个事件可以在起点的布局上执行，而seeds中pivot的后一个事件可以作用在$\tau$的最后一个布局上。同时，需要满足$\tau$的第一个事件作用页面是不活跃的。</p>
<p>其中，对于这些不活跃的页面$b$，一般会存在一个活跃页面$a$与其保持相互独立的关系，即在$b$上的任何操作不会影响$a$的原有操作。</p>
<p>于是本文定义了两个概念：</p>
<p>**独立事件序列：**指的是对于布局$l_i$，存在一个额外的序列$\tau=[e_1&rsquo;,e_2&rsquo;\dots]$满足$e_1&rsquo;.r(l_i)$是不活跃的，即独立于$l_i$中任一活跃页面。</p>
<p>**序列连接：**指的是假设两个序列$\tau_1=[e_1,e_2\dots]$和$\tau_2=[e_1&rsquo;,e_2&rsquo;\dots]$，若$\tau_2$的第一个事件$e_1&rsquo;$能够在$\tau_1$的最后一个布局$l_{|\tau_1|+1}$上作用，则两个序列相连，记为$\tau_1 \leadsto \tau_2$。</p>
<p>假设seeds的事件序列为$E=[e_1, e_2, e_3,\dots, e_n]$，在生成mutants时，需要在第$i$个位置前插入一个序列$\tau=[e_1&rsquo;,e_2&rsquo;\dots,e_m&rsquo;]$，生成$E&rsquo;=[e_1, e_2\dots, e_i, e_1&rsquo;,e_2&rsquo;\dots e_m&rsquo;, e_{i+1}\dots e_n]$。此时$\tau$应该满足上述的两个条件：</p>
<ol>
<li>是一个独立事件序列</li>
<li>满足$[e_1\dots, e_{i-1}]\leadsto \tau \leadsto [e_{i},\dots e_n]$</li>
</ol>
<p>举例来说，假设下图是seeds，令$l_3$为pivot布局。$l_3$可以被抽象为状态$s_1$（包含所有页面的类型）。可以看到Cinema、Sleeping和Cleaning是三个相互独立的页面，且属于同一个group view。其中Cinema（记为$w_1$）是活跃的（在$e_1$时有$h[Group(w_1)]=w_1$）。</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4zp315khpj220y0f4tde.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h4zp315khpj220y0f4tde.jpg"></p>
<p>因此，一个合理的事件序列$\tau$可以从点击Sleeping或点击Cleaning开始。根据图模型可以构建下一个事件（点击Camera）。我们以$\tau_1=[Cleaning, Camera]$为例，它能够满足序列连接的条件。首先第一个事件的Cleaning页面在$l_3$上可以找到相似的页面（即Cleaning本身），而过渡到$l_4$的事件（点击Nav）也可以在点击Camera之后的状态$s_1$中执行。</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h54ygie6h2j20yy0u00vs.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h54ygie6h2j20yy0u00vs.jpg"></p>
<p>该步骤实现的具体算法如下：</p>
<ol>
<li>获取seeds的布局、页面和活跃状态序列$&lt;L,I,H&gt;$，初始化mutants为空序列</li>
<li>遍历$&lt;L,I,H&gt;$中的每一个布局和对应的活跃状态$&lt;l_i,h_i&gt;$
<ol>
<li>获取抽象表示$l_{abs}$</li>
<li>基于Search_traces($i$, $l_{abs}$,$M$)函数获取多个mutants</li>
<li>将mutants添加至mutants序列</li>
</ol>
</li>
<li>返回mutants序列</li>
</ol>
<p>其中，Search_traces($i$, $l_{abs}$,$M$)函数的具体步骤为：</p>
<ol>
<li>初始化候选序列为空，初始化空栈</li>
<li>基于图模型$M$，遍历$l_{abs}$的所有出度关系，即$&lt;l_{abs}, e, l_{next}&gt;$
<ol>
<li>如果事件$e$可以作用在$l_i$上，且作用的页面是不活跃的，则将$[e]$推入栈中，此处$e$为只有一个事件的事件序列</li>
</ol>
</li>
<li>当栈不为空时，有：
<ol>
<li>获取栈中的第一个事件序列$\tau$</li>
<li>获取$\tau$的前一个布局$l_{\tau-last}$</li>
<li>若$(l_{abs}\simeq l_{\tau-last})\wedge ([e_1\dots, e_{i-1}]\leadsto \tau \leadsto [e_{i},\dots e_n]) \wedge (|\tau|&lt; \rm{MAX_LENGTH})$，则将$\tau$加入候选序列；否则遍历$M$中$l_{\tau-last}$的出度，将其拼接在$\tau$后并且加入栈中</li>
<li>当候选序列超出预期个数时返回所有候选序列</li>
</ol>
</li>
</ol>
<p>在3.a.中，MAX_LENGTH表示插入序列最长的长度，此步骤也反应了算法广度优先搜索的策略，若当前找到的序列不满足连接关系，则在序列中再添加一个步骤查看是否符合条件。</p>
<h3 id="基于gui的oracle-checking">基于GUI的oracle checking</h3>
<p>在检查seeds和mutants的差异时，主要遵循的思想是：对于mutants中额外的操作，相对seeds来说只会在UI上相对增加GUI效果，而不会减少GUI效果。</p>
<p>本文对GUI效果定义可以概括为：为两个类似布局（即属于同一个父页面的布局，如同为DiaryActivity）的GUI变化。具体的定义如下：</p>
<p>**GUI效果：**对于布局列表$L$和对应的事件序列$E$，在给定两个相似布局$l_i$和$l_j$且$i&lt;j$的情况下，他们的GUI效果被描绘为$l_i\backslash l_j$与$l_j\backslash l_i$之间去重后的并集，这里的”$\backslash$”符号定义为两个布局之间的差，即$l_i$中存在而$l_j$中不存在的页面。最终GUI效果被记为$\Delta(l_i, l_j)=(l_i\backslash l_j)\uplus (l_j\backslash l_i)$。</p>
<p>$\Delta(l_i,l_j)$有三种情况：</p>
<ol>
<li>$(w,\perp)\in \Delta(l_i,l_j)$表示$l_i$中的$w$被删除了</li>
<li>$(\perp, w)\in \Delta(l_i,l_j)$表示$l_j$中新增了$w$</li>
<li>$(w,w&rsquo;)\in \Delta(l_i,l_j),w\ne w&rsquo;$表示$w$被删除，且新增了$w'$</li>
</ol>
<p>可以看到，若在seeds中存在$\Delta(l_i,l_j)$，与其在mutant中对应的$\Delta(l_i&rsquo;,l_j&rsquo;)$有着以下关系：$\Delta(l_i,l_j)\not\subset \Delta(l_i&rsquo;,l_j&rsquo;)$，则存在GUI不一致的问题。</p>
<p>为了增加算法性能，我们其实只需要考虑那些会被mutants影响的、且相似的布局，观察其是否存在GUI不一致的现象。具体的算法如下：</p>
<ol>
<li>获取seeds布局列表$L=[l_1,\dots,l_k,l_{k+1},\dots l_{n+1}]$和mutants的布局列表$L&rsquo;=[l_1,\dots,l_k]::L_{\tau}::[l_{k+1}&rsquo;,\dots,l_{n+1}&rsquo;]$，初始化测试通过flag为True</li>
<li>对于$L$的每对布局$(l_i,l_j)\in L\times L$，筛选出$(i\le l) \wedge (k+1 \le j)$或者$k+1\le i \le j$的元组</li>
<li>判断改元组是否为相似布局，若是，则执行4，否则继续遍历</li>
<li>判断是否满足$\Delta(l_i,l_j)\not\subset \Delta(l_i&rsquo;,l_j&rsquo;)$，若是，则flag置为False，否则继续遍历</li>
</ol>
<h2 id="实现细节">实现细节</h2>
<h3 id="seeds生成">Seeds生成</h3>
<p>在seeds生成时，我们应该尽可能地让测试用例有多样性、实用性和可扩展性。本文在生成用例的过程中保持和更新选取各event的权重来增加测试覆盖率，同时也会选取一些更有意义的操作（比如对话框中选择“是”，而不是“取消”）</p>
<h3 id="mutants生成">Mutants生成</h3>
<p>本文为了提升mutants生成的效率，做出了以下三点工作：</p>
<ol>
<li>在生成mutants时本文使用了广度优先搜索，经过研究这比深度优先搜索更具有效率。</li>
<li>同时为了避免路径爆炸的问题，在序列选择时，每个环路最多被选择两次，且每个group只考虑三个独立页面。</li>
<li>图模型删除了两个state间冗余的事件，来缩小搜索范围。对于一些不能保证复现的用例，本文保存了这些用例的前缀信息，在探索到包含这些前缀信息的用例时进行剪枝。</li>
</ol>
<h3 id="减少重复错误和假阳性样本">减少重复错误和假阳性样本</h3>
<p>GINIE报告的错误中，有许多是重复的错误，或是假阳性样本（实际上不是错误，但被判定为错误）。</p>
<p>为了减少重复性错误，本文将所有疑似功能错误转化为字符串，字符串中保留了oracle violation的信息，通过比较字符串的方式去除重复的错误，同时也统计每个相同字符串出现的次数。本文认为，在这些重复出现的字符串中，出现次数较少的更可能是真实的问题（我们乐观地认为真实的bug不会出现太频繁）。具体来说，本文只选择了出现一次的字符串对应的错误。（当然，这会导致模型漏判）</p>
<p>对于假阳性问题，很多都是由于软件的一些特性以及对布局的抽象导致的。为了解决这个问题，本文使用了以下两个策略：</p>
<ol>
<li>对于每个seed执行两次，来找到那些每次执行情况不一样的页面（如对时间敏感的、或是有随机行为的页面），在oracle checking时不考虑这些页面。</li>
<li>利用启发式算法来判断一个事件序列是否能够回到pivot页面：若序列最后一个页面与pivot页面的布局相似度小于50%，则认为它没有回到pivot，并抛弃这条mutant。</li>
</ol>
<h2 id="评估">评估</h2>
<p>本文在评估GINIE时，专注于以下几个问题：</p>
<ul>
<li>RQ1（Bug Finding）：GINIE能否在真实软件中找到这些非崩溃bug？现有的软件测试工具能否做到这些？</li>
<li>RQ2（Code Coverage）：GINIE能否通过模糊测试提升代码覆盖率？</li>
<li>RQ3（Oracle Precision）：GIENE对检测非崩溃功能性bug的准确率有多少？</li>
<li>RQ4（Bug Types）：GINIE主要能够找到什么类型的非崩溃bug？</li>
</ul>
<h3 id="rq1bug-findings">RQ1:Bug Findings</h3>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h563c4yvb3j21100m4wjk.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h563c4yvb3j21100m4wjk.jpg"></p>
<p>表3-表5展示了GINIE在26个软件中找到的bug情况统计。GINIE找到了34个非崩溃bug和26个崩溃bug（共60个），其中58个被证实，36个被修复。对比来说，MONKEY和APE对没有找到任何一个非崩溃bug。</p>
<p>表5详细展示了对于每个软件检测的详细情况，分别对应：</p>
<ul>
<li>#Generated Mutants：生成的mutants个数</li>
<li>#Executed Mutants：执行的mutants个数</li>
<li>#Error Mutants：发现疑似错误的个数</li>
<li>#D.E. Mutants：去重后的疑似错误个数</li>
<li>#1-O.D.E. Mutants：仅出现一次的疑似错误个数</li>
<li>#1-O.D.E. Mutants(Refined)：减少假阳性样本后的错误个数</li>
<li>#T.P. Mutants：真实bug个数</li>
<li>#Distinct Non-crashing Bugs：去重后的非崩溃Bug数</li>
<li>#Distinct Crash-Bugs：去重后的崩溃Bug数</li>
</ul>
<h3 id="rq2code-coverage">RQ2:Code Coverage</h3>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5642ef5jmj210s0j2tdt.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h5642ef5jmj210s0j2tdt.jpg"></p>
<p>表6展示了各软件所有seeds和mutants的的代码覆盖情况，包括行数占比、分支数占比和方法数占比。此处使用了Jacoco来衡量代码的覆盖率。可以看到mutants在各指标的覆盖率上都有所提升。</p>
<h3 id="rq3oracle-precision">RQ3:Oracle Precision</h3>
<p>从表5可知，GINIE产生了许多假阳性样本，具体统计情况如下所示：</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h567rix80rj20hk0k4q4p.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h567rix80rj20hk0k4q4p.jpg"></p>
<p>本文把引起假阳性的原因分为三类：</p>
<ul>
<li>页面独立属性被破坏（记为#I）</li>
<li>布局类型推断不准确（记为#L）</li>
<li>状态抽象不够准确（记为#S）</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5698f87xqj20u00y4wj6.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h5698f87xqj20u00y4wj6.jpg"></p>
<p>**页面独立属性被破坏：**GINIE所选择的组件虽然和其余组件不属于一个group或是同一个group中的兄弟关系，它们在GINIE中被定义为相互独立，而实际上有依赖关系。如图4第一列中，UnitConverter中的刷新按钮和其余按钮不在同一个group，却会影响页面中From和To两列的状态；AnyMemo中的随机按钮和重复按钮是同一个group的兄弟关系，但它们同时开启时会相互影响。</p>
<p>**布局类型推断不准确：**在oracle checking时，GINIE会选择类型相似的布局进行比较并计算GUI effects，评判“相似”的标准是属于同一个主页面。但有时同一个主页面的两个布局功能差异较大，GINIE很难自动判断，如图4第二列中的FEATURED与BOOKMARKS是完全不同的两个功能，但是会被GINIE判断为相似的布局。</p>
<p>**状态抽象不够准确：**在构建mutants时，$\tau$的结尾需要和pivot达成闭环，闭环的条件是结尾的布局要和pivot相似，相似的条件是其页面的类型相等。但有的页面仅仅是在title等属性上不一致，但是确实两个不同功能的页面，此时GINIE会把它们当作相似的页面，从而构建了不合适的mutant。如图4第三列中的“New Activity”页面的“Gardening”页面。</p>
<p>尽管GINIE的准确率只有40.9%（260/635），这也比当前较为著名的工具（如Facebook的INFER的26.3%）要高出不少，且很多bug都是开发者编写测试用例也无法测试出来的。另外GINIE并不需要投入太多人力去找到这些bug，只需要在找到的bug中筛选出真实的bug，很大程度上降低了时间成本。</p>
<h3 id="rq4bug-types">RQ4:Bug types</h3>
<p>本文总结了6种类型的bug，并举例说明：</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h56b6w9rrmj21ez0u0n46.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h56b6w9rrmj21ez0u0n46.jpg"></p>
<ol>
<li>数据丢失：一些bug会导致用户数据的丢失，如Markor是一个基于markdown的笔记工具，如果用户新建了一个和已有文件相同标题的笔记，则新的文件内容会覆盖旧的文件内容。（图5列1）</li>
<li>函数不被执行：一些bug导致某些功能突然失去作用，如SkyTube是一款播放youtube视频的工具，当用户在菜单中选择“在浏览器中播放”后返回软件，则用户无法点击开始或暂停按钮（图5列2）</li>
<li>错误行为：一些特定的功能会有异常的行为，比如错误的页面被打开，或是某个已经被删除的页面被打开。如ActivityDiary中（图5列3）：
<ol>
<li>点进一个日记（如Officework）中</li>
<li>将其名字修改为Shopping</li>
<li>重新建一个名为Gardening的日记，在不保存的情况下返回</li>
<li>打开Shopping时，出现的是Gardening的页面，若此时修改内容会引起数据不一致问题</li>
</ol>
</li>
<li>GUI状态不一致：页面会出现与功能描述不一致的情况，如音频播放器Transistor（图5列4），在音频播放时，音频文件名旁会出现绿色标识，表示正在播放；当音频暂停时标识会消失。但当在播放时对文件重命名，再暂停，则播放标识不会消失。</li>
<li>GUI页面展示错误：一些页面存在重复展示的问题。如Task中（图5列5），当创建一个包含标签（如Meeting）的新任务后，若再额外插入两个附件，则页面上的会出现两个相同的标签；一些页面存在组件突然消失的问题，如Fosdem中（图5列6），在连续点击两次主菜单中的“搜索事件”按钮后，主菜单左边的按钮会消失。</li>
<li>GUI设计问题：这种类型的bug和功能性GUI涉及问题相关，这容易影响用户体验。比如RadioDroid的历史播放页面遗漏了一些音频，原因是程序保存了两种类型的历史数据“history”和“track history”。其中track history只记录了音轨信息。但程序并没有清晰的区分这两种数据。</li>
</ol>
<h2 id="讨论">讨论</h2>
<h3 id="ginie对长期存在问题的解决">GINIE对长期存在问题的解决</h3>
<p>本文对GINIE检测到的34个非崩溃bug进行分析，结果如下图所示：</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h56gl0c5drj20vg0suacq.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h56gl0c5drj20vg0suacq.jpg"></p>
<p>78.8%（26/34）的bug超过一年没有被解决，57.6%（19/34）的bug影响了超过10个版本。</p>
<h3 id="seeds和mutants的质量">seeds和mutants的质量</h3>
<p>下表描绘了seeds和mutants的质量：</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h56gn7pndfj20ji0fuq4r.jpg" alt="https://tva1.sinaimg.cn/large/e6c9d24ely1h56gn7pndfj20ji0fuq4r.jpg"></p>
<p>其中B/A表示能够生成错误的seeds的比例，T.P. Insert.Pos.表示mutant插入位置的正确率。</p>
<h3 id="效度威胁">效度威胁</h3>
<p>本文主要有两个主要的效度威胁：</p>
<ol>
<li>本文只评估了12个软件。为了解决这个问题，本文选择了不同类型的软件，来保证评估的泛化性。</li>
<li>假阳性的分析是人为开展的，本文通过多个共同作者的交叉验证来解决这个问题。</li>
</ol>
<h2 id="未来的工作方向">未来的工作方向</h2>
<p>在没有oracles的情况下进行安卓软件的自动化功能验证，是一个很具挑战性的问题。</p>
<ol>
<li>页面独立性虽然可以找到很多类型的bug，但是尚不能覆盖所有类型的功能性问题。目前GINIE只能通过GUI的差异找到那些会引发GUI不一致的问题。</li>
<li>目前GINIE只利用了随机生成的seeds来检测bug，后续可以使用一些人为提供的测试用例来检测更多的功能问题。</li>
</ol>

  </section>
  <footer>
    
    

    
    <nav class="p-pagination c-pagination">
      <div class="c-pagination__ctrl">
        <div class="c-pagination__newer">
          
          <a href="https://hagemon.github.io/posts/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%B5%8B%E8%AF%95%E7%BB%BC%E8%BF%B0/">Newer</a>
          
        </div>
        <div class="c-pagination__older">
          
          <a href="https://hagemon.github.io/posts/multi-level-gui-comparison-criteria/">Older</a>
          
        </div>
      </div>
    </nav>
    
    

<section class="p-related">
  <h3>See Also</h3>
  <div class="p-related__list">
    <div class="swiper swiper-container">
      <ul class="swiper-wrapper">
        
        <li class="p-related__item swiper-slide">
          <a href="/posts/multi-level-gui-comparison-criteria/"
            >
            <span>Multi Level GUI Comparison Criteria</span>
          </a>
        </li>
        
        <li class="p-related__item swiper-slide">
          <a href="/posts/%E5%9F%BA%E4%BA%8E%E7%9C%9F%E5%AE%9Ebug%E7%9A%84gui%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%A0%87%E5%87%86%E8%AE%BE%E8%AE%A1/"
            >
            <span>基于真实bug的GUI自动化测试标准设计</span>
          </a>
        </li>
        
        <li class="p-related__item swiper-slide">
          <a href="/posts/%E7%90%86%E8%A7%A3%E5%92%8C%E6%A3%80%E6%B5%8B%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8%E4%B8%AD%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE%E7%9B%B8%E5%85%B3%E7%9A%84%E7%BC%BA%E9%99%B7/"
            >
            <span>理解和检测安卓应用中系统设置相关的缺陷</span>
          </a>
        </li>
        
      </ul>
    </div>
    <div class="related-prev"></div>
    <div class="related-next"></div>
  </div>
  
</section>


    

  </footer>
</article>
  </main>
  <footer class="l-footer">
    
<ul class="c-links">
  
  
  <li class="c-links__item">
    <a href="https://twitter.com/oneFolder_" target="_blank">
      <svg viewBox="0 0 64 64" class="c-links__icon">
        <title>twitter</title>
        <use xlink:href="#icon-twitter"></use>
      </svg>
    </a>
  </li>
  
  
  
  
  <li class="c-links__item">
    <a href="https://github.com/hagemon" target="_blank">
      <svg viewBox="0 0 64 64" class="c-links__icon">
        <title>github</title>
        <use xlink:href="#icon-github"></use>
      </svg>
    </a>
  </li>
  
  
  
  
  
  
  
  
  
  
  
  
  
</ul>



    <p class="p-copyright">
      
        Hagemon Production
      
    </p>
  </footer>

  <script type="text/javascript" src="https://hagemon.github.io/js/bundle.js" defer></script>
</body>
</html>

