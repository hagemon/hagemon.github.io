<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>iOS dev on Hagemon&#39;s Log</title>
    <link>https://hagemon.github.io/tags/ios-dev/</link>
    <description>Recent content in iOS dev on Hagemon&#39;s Log</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>Hagemon Production</copyright>
    <lastBuildDate>Sun, 28 Feb 2021 22:07:38 +0000</lastBuildDate><atom:link href="https://hagemon.github.io/tags/ios-dev/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Swiftå®ç°ç®€å•çš„å›¾åƒç¼“å­˜</title>
      <link>https://hagemon.github.io/posts/swift%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E5%9B%BE%E5%83%8F%E7%BC%93%E5%AD%98/</link>
      <pubDate>Sun, 28 Feb 2021 22:07:38 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/swift%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E5%9B%BE%E5%83%8F%E7%BC%93%E5%AD%98/</guid>
      <description>åœ¨iOS Appä¸­ï¼Œä¸ºäº†å¢åŠ ç”¨æˆ·çš„ä½“éªŒæ„Ÿã€å‡å°‘ç½‘ç»œçš„è¯·æ±‚ã€å¢åŠ Appçš„æ€§èƒ½ï¼Œæˆ‘ä»¬åœ¨è·å–å›¾åƒä¹‹åé€šå¸¸ä¼šå°†å…¶è¿›è¡Œç¼“å­˜ï¼Œæˆ‘å­¦ä¹ äº†ä»é›¶å¼€å§‹æ‰“é€ ä¸€ä¸ªiOSå›¾ç‰‡åŠ è½½æ¡†æ¶ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„åŸºäºSwiftçš„å›¾åƒç¼“å­˜ã€‚
å›¾ç‰‡åŠ è½½ æˆ‘ä»¬ä»æœ€ç®€å•çš„åœºæ™¯å¼€å§‹ï¼Œåœ¨ViewControllerä¸­å®ç°downloadæ–¹æ³•ï¼Œé€šè¿‡URLSessionä¸‹è½½ä¸€ä¸ªå›¾ç‰‡å¹¶æ˜¾ç¤ºåˆ°ImageViewä¸Šï¼š
func download() {  let url = URL(string: &amp;#34;https://user-gold-cdn.xitu.io/2019/3/25/169b406dfc5fe46e&amp;#34;)  let session = URLSession.shared  let task = session.dataTask(with: url!, completionHandler: { [weak self]  data, res, error in  guard error == nil,  let data = data  else { return }  let image = UIImage(data: data)  guard let strongSelf = self else {return}  DispatchQueue.main.async {  strongSelf.imageView.image = image  }  })  task.</description>
    </item>
    
    <item>
      <title>GCDå¼‚æ­¥æ¸²æŸ“UITableViewCell&#43;æ»šåŠ¨ä¼˜åŒ–</title>
      <link>https://hagemon.github.io/posts/gcd%E5%BC%82%E6%AD%A5%E6%B8%B2%E6%9F%93uitableviewcell&#43;%E6%BB%9A%E5%8A%A8%E4%BC%98%E5%8C%96/</link>
      <pubDate>Thu, 25 Feb 2021 22:16:05 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/gcd%E5%BC%82%E6%AD%A5%E6%B8%B2%E6%9F%93uitableviewcell&#43;%E6%BB%9A%E5%8A%A8%E4%BC%98%E5%8C%96/</guid>
      <description>åœ¨åŸºäºfeedæµçš„åº”ç”¨ä¸­ï¼Œæœ‰ä¸¤ä¸ªéœ€è¦é‡ç‚¹è§£å†³çš„é—®é¢˜ï¼š
 å¼‚æ­¥è¿›è¡Œè€—æ—¶çš„æ•°æ®åŠ è½½ æ»šåŠ¨æ—¶æ§åˆ¶åŠ è½½ä»»åŠ¡ä»¥ä¿æŒæ»šåŠ¨æµç•…  è®¾å®šä¸€ä¸ªç®€å•çš„åœºæ™¯ï¼š
 åŸºäºUITableViewCell æ¯ä¸ªcelléƒ½æ‹¥æœ‰ä¸€ä¸ªUIImageView åœ¨UIImageViewä¸Šç»˜åˆ¶åœ†è§’å¤´åƒ ç»˜åˆ¶100ä¸ªcellå¹¶è¿›è¡Œé«˜é¢‘ç‡çš„æ»šåŠ¨  æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Instrumentå’ŒXCodeçš„Debuggeré‡Œè§‚å¯Ÿè¿™äº›æŒ‡æ ‡ï¼š
 Average Frame Time æ˜¯å¦ç¦»å±æ¸²æŸ“  ç®€å•å®ç° æœ€ç®€å•çš„å®ç°æ–¹å¼æ˜¯ä¸ºæ¯ä¸€ä¸ªcellä¸Šçš„UIImageViewè®¾ç½®cornerRadiusï¼Œä½†æ˜¯ä¼šå­˜åœ¨ç¦»å±æ¸²æŸ“ï¼Œä¸”AFTå¾ˆé•¿ã€‚ å…¶å®ç°åœ¨ç›´æ¥ç”¨pngå¹¶è®¾ç½®cornerRadiuså¹¶ä¸ä¼šè¢«ç¦»å±æ¸²æŸ“ï¼Œè¿™é‡Œä¸ºäº†å±•ç¤ºæ•ˆæœç‰¹åœ°æŠŠlayeræ …æ ¼åŒ–ä¸€ä¸‹ğŸ˜…
class TableViewController: UITableViewController {   override func viewDidLoad() {  super.viewDidLoad()  }   override func numberOfSections(in tableView: UITableView) -&amp;gt; Int {  return 1  }   override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&amp;gt; Int {  return 100  }    override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&amp;gt; UITableViewCell {  let cell = tableView.</description>
    </item>
    
    <item>
      <title>Clipin Log 7. æå‡æˆªå±æµç•…åº¦</title>
      <link>https://hagemon.github.io/posts/clipin-post-7/</link>
      <pubDate>Wed, 24 Feb 2021 23:23:36 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/clipin-post-7/</guid>
      <description>æ—§ç‰ˆæœ¬ åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘åœ¨ä¸€ä¸ªClipViewä¸Šå¯¹æš—è‰²èƒŒæ™¯å’Œé«˜äº®åŒºåŸŸç»˜åˆ¶ï¼š
override func draw(_ dirtyRect: NSRect) {   super.draw(dirtyRect)   // Drawing code here.  guard let image = self.image, let drawingRect = self.drawingRect else {  return  }  image.draw(in: self.bounds, operation: .sourceOver, fraction: 0.5) // ç»˜åˆ¶èƒŒæ™¯  var rect = NSIntersectionRect(drawingRect, self.bounds) // å–é«˜äº®åŒºåŸŸå’Œé¡µé¢çš„äº¤é›†åŒºåŸŸ  rect = NSIntegralRect(rect) // åŒºåŸŸå–æ•´ï¼Œä¸ºäº†é˜²æ­¢æŠ–åŠ¨é—®é¢˜   // å–å±å¹•å›¾åƒä¸­é«˜äº®åŒºåŸŸéƒ¨åˆ†æ¸²æŸ“åœ¨viewä¸Šï¼Œä½¿ç”¨.sourceOveræ“ä½œ  // ç”±äºsourceå›¾åƒæ˜¯alphaä¸º1ï¼Œæ‰€ä»¥æ¸²æŸ“ç»“æœå³æ˜¯åŒºåŸŸå›¾åƒæœ¬èº«  image.draw(in: rect, from: rect, operation: .sourceOver, fraction: 1.</description>
    </item>
    
    <item>
      <title>Swift5ï¼šåŸºäºæ­£åˆ™è¡¨è¾¾å¼å®ç°ç®€å•çš„Markdownå³æ—¶æ¸²æŸ“</title>
      <link>https://hagemon.github.io/posts/swift5%E5%9F%BA%E4%BA%8E%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84markdown%E5%8D%B3%E6%97%B6%E6%B8%B2%E6%9F%93/</link>
      <pubDate>Sat, 13 Feb 2021 23:23:44 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/swift5%E5%9F%BA%E4%BA%8E%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84markdown%E5%8D%B3%E6%97%B6%E6%B8%B2%E6%9F%93/</guid>
      <description>æœ¬æ–‡ä»¥iOSä¸‹çš„UITextViewä¸ºä¾‹ï¼Œåœ¨MacOSä¸Šåªè¦æ›´æ”¹NSTextViewçš„ç›¸åº”çš„æ¥å£ååŒæ ·é€‚ç”¨ã€‚
å®ç°æ€è·¯ æˆ‘åœ¨å®ç°è¿‡ç¨‹ä¸­å°è¯•äº†å±€éƒ¨å®æ—¶æ¸²æŸ“å’Œå…¨å±€å®æ—¶æ¸²æŸ“çš„æ–¹å¼ï¼Œç”±äºå­¦è‰ºä¸ç²¾ï¼Œæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°å¾ˆå¥½çš„æ–¹æ³•è¿›è¡Œå±€éƒ¨å®æ—¶æ¸²æŸ“ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸‹æˆ‘å¯¹äºä¸¤ç§æ–¹æ³•çš„æ€è·¯ã€‚
å±€éƒ¨å®æ—¶æ¸²æŸ“ æœ€æ—©çš„æ€è·¯æ˜¯æ ¹æ®ç”¨æˆ·çš„è¾“å…¥ä½ç½®å¯¹åº”çš„æ®µè½ï¼Œæ›´æ–°NSMutableAttributedStringï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š
 ç›‘å¬textViewDidChange æ‰¾åˆ°å…‰æ ‡å¯¹åº”çš„æ®µè½ æ ¹æ®æ®µè½å†…å®¹ï¼ŒåŸºäºæ­£åˆ™è¡¨è¾¾å¼åˆ†æå¹¶å¯¹åº”æ–‡å­—çš„attribute  ä½†æ˜¯æŒ‰ç…§è¿™ç§æ€è·¯ï¼Œåœ¨æ›¿æ¢æ–‡å­—æ˜¯ä¼šå¯¼è‡´attributeçš„æ··ä¹±ã€‚attributeçš„å½¢å¼æ˜¯å±æ€§:Rangeçš„å½¢å¼ï¼Œåœ¨æ›´æ–°äº†æ–‡æœ¬ä»¥åï¼Œæ‰€æœ‰çš„æ–‡æœ¬rangeä½ç½®éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚æˆ‘æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„æ–¹æ³•æ¥å±€éƒ¨æ›´æ–°NSMutableAttributedStringçš„å±æ€§ã€‚
å…¨å±€å®æ—¶æ¸²æŸ“ å…¨å±€å®æ—¶æ¸²æŸ“æŒ‡åœ¨ç›‘å¬æ–‡æœ¬å˜åŒ–åæ›´æ–°æ•´ä¸ªæ–‡æœ¬çš„attributeï¼Œè¿™æ ·ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½çš„æŸå¤±ï¼Œä½†æ˜¯æ›´æ˜“äºå®ç°ã€‚ä¸»è¦çš„æ€è·¯å¦‚ä¸‹ï¼š
 ç›‘å¬textViewDidChange é‡æ–°è§£ææ‰€æœ‰æ–‡å­—çš„attributeå¹¶æ›´æ–°  æˆ‘ä»¬é¦–å…ˆéœ€è¦å°è£…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„å·¥å…·REã€‚
æ­£åˆ™è¡¨è¾¾å¼å·¥å…·RE REçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š
 åŒ¹é…å¹¶è·å–Regexå¯¹åº”çš„å†…å®¹ æ›¿æ¢Regexæ‰€åŒ¹é…çš„å†…å®¹ åŒ¹é…å¹¶è·å–Regexå¯¹åº”çš„å†…å®¹åŠå…¶èŒƒå›´(NSRange)  é¦–å…ˆå°è£…ä¸€ä¸ªREè¿”å›çš„ç»“æ„ä½“
struct Parsed {  var content: String  var range: NSRange } class RE: NSObject {  static func regularExpression(validateString:String, inRegex regex:String) -&amp;gt; [String]{  // åŒ¹é…å¹¶è·å–å†…å®¹  do {  let re: NSRegularExpression = try NSRegularExpression(pattern: regex, options: [])  let matches = re.</description>
    </item>
    
    <item>
      <title>Swift5&#43;CloudKit&#43;CoreDataå®ç°å¤šç»ˆç«¯åŒæ­¥</title>
      <link>https://hagemon.github.io/posts/swift5&#43;cloudkit&#43;coredata%E5%AE%9E%E7%8E%B0%E5%A4%9A%E7%BB%88%E7%AB%AF%E5%90%8C%E6%AD%A5/</link>
      <pubDate>Thu, 04 Feb 2021 22:42:18 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/swift5&#43;cloudkit&#43;coredata%E5%AE%9E%E7%8E%B0%E5%A4%9A%E7%BB%88%E7%AB%AF%E5%90%8C%E6%AD%A5/</guid>
      <description>CloudKitå’ŒCoreDataçš„é…ç½®å·²ç»æœ‰å¾ˆå¤šèµ„æ–™äº†ï¼Œè¿™é‡Œä¸é˜è¿°ã€‚
Preparation åœ¨åŸºäºCoreDataå’ŒCloudKitçš„é¡¹ç›®ä¸­ï¼Œä¼šåœ¨AppDelegateä¸­è‡ªåŠ¨ç”Ÿæˆcontainerï¼š
lazy var persistentContainer: NSPersistentContainer = {   let container = NSPersistentContainer(name: &amp;#34;Model&amp;#34;)   // get the default store description  guard let description = container.persistentStoreDescriptions.first else {  fatalError(&amp;#34;Could not retrieve a persistent store description.&amp;#34;)  }   // initialize the CloudKit schema  let id = &amp;#34;iCloud.your.id&amp;#34;  // è·å–åŸºäºCloudKitçš„Options  let options = NSPersistentCloudKitContainerOptions(containerIdentifier: id)  description.cloudKitContainerOptions = options  // ç”¨äºè·Ÿè¸ªmergeçš„è®°å½•  description.</description>
    </item>
    
    <item>
      <title>Clipin Log 6. å¤šå±å¹•æ”¯æŒ</title>
      <link>https://hagemon.github.io/posts/clipin-post-6/</link>
      <pubDate>Sat, 09 Jan 2021 21:44:43 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/clipin-post-6/</guid>
      <description>å¤šå±å¹•ç¯å¢ƒ åœ¨å¤šå±å¹•ç¯å¢ƒä¸‹ï¼Œå„ä¸ªå±å¹•çš„èµ·å§‹åæ ‡originä¼šæ ¹æ®ç”¨æˆ·åœ¨ç³»ç»Ÿåå¥½è®¾ç½®ä¸­å¯¹æ˜¾ç¤ºå™¨æ’åˆ—çš„è®¾ç½®è€Œä¸åŒï¼Œä¸‹å›¾ç›´è§‚åœ°è¡¨ç¤ºäº†å¤šå±å¹•ç¯å¢ƒä¸‹å„å±å¹•çš„åæ ‡ã€‚
é€šè¿‡screen.visibleFrameå¯ä»¥è®¿é—®å±å¹•åœ¨æ­¤åæ ‡ç³»ä¸‹çš„frameã€‚
å®ç°æ€è·¯  åœ¨ClipManager.shared.start()ä¸­æ£€æµ‹æ‰€æœ‰å±å¹•å¹¶åˆ›å»ºæ§åˆ¶å™¨ å¯¹äºæ¯ä¸ªæ§åˆ¶å™¨ï¼Œè·å–å¯¹åº”æ˜¾ç¤ºå™¨å½“å‰é¡µé¢å›¾åƒ åœ¨æ‰§è¡ŒPinæ“ä½œæ—¶ï¼Œéœ€è¦å°†çª—å£åç§»åˆ°æ­£ç¡®çš„ä½ç½®  class ClipManager { 	// ....   var controllers: [ClipWindowController] = []  // ....  func start() {  NotificationCenter.default.post(name: NotiNames.pinNormal.name, object: nil)  NSApplication.shared.activate(ignoringOtherApps: true)   for screen in NSScreen.screens { // è·å–æ‰€æœ‰å±å¹•  let view = ClipView(frame: screen.frame)  let clipWindow = ClipWindow(contentRect: screen.frame, contentView: view)  let clipWindowController = ClipWindowController(window: clipWindow)  controllers.append(clipWindowController)  self.status = .</description>
    </item>
    
    <item>
      <title>Clipin Log 5. å•å±å¹•Pinå®ç°</title>
      <link>https://hagemon.github.io/posts/clipin-log-5/</link>
      <pubDate>Sat, 09 Jan 2021 21:41:18 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/clipin-log-5/</guid>
      <description>PinåŠŸèƒ½çš„è§¦å‘æ—¶æœºæ˜¯åœ¨ClipManagerçš„selectçŠ¶æ€ä¸‹ç‚¹å‡»å›è½¦æ—¶ï¼Œæ‰€ä»¥åœ¨ClipWindowControllerçš„doneä¸­ï¼Œå°†bitmapRepå’Œå¯¹åº”çš„rectä½œä¸ºå‚æ•°ï¼Œæ‰§è¡ŒPinæ“ä½œ
class ClipWindowController: NSWindowController { 	// ....  @objc func done() {  guard let view = self.clipView,  let rect = view.drawingRect  else {  return  }  guard let bitmapRep = view.bitmapImageRepForCachingDisplay(in: rect) else {return}  view.cacheDisplay(in: rect, to: bitmapRep)   // åˆ©ç”¨bitmapRepè¿›è¡ŒPinæ“ä½œ  PinManager.shared.pin(rep: bitmapRep, rect: rect)  }  	// ....  } PinManagerå•ä¾‹ ä¸»è¦å®Œæˆå°†å›¾åƒä½œä¸ºä¸€ä¸ªæ–°çš„çª—å£ï¼Œå¹¶æ”¾ç½®åœ¨å±å¹•é¡¶å±‚çš„æ“ä½œï¼Œè¿™é‡Œç§°ä¸ºpinæ“ä½œã€‚æºç é‡Œè¿˜å®ç°äº†ä¸€äº›ä¿å­˜å›¾åƒçš„å‡½æ•°ï¼Œåç»­ä¼šåœ¨å°å·¥å…·ä¸­ä½¿ç”¨ã€‚
pinå‡½æ•°åˆå§‹åŒ–äº†é¡µé¢ã€çª—å£å’Œæ§åˆ¶å™¨å¹¶æ˜¾ç¤ºçª—å£ï¼Œåœ¨å¤„ç†ç»“æŸåå‘é€pinEndé€šçŸ¥ã€‚
class PinManager: NSObject {  static let shared = PinManager()  var controllers: [PinWindowController] = []   func pin(rep: NSBitmapImageRep, rect:NSRect) {  let image = NSImage(size: rect.</description>
    </item>
    
    <item>
      <title>Clipin Log 4. é«˜äº®åŒºåŸŸçš„é€‰å–&amp;æ‹–æ‹½&amp;è°ƒæ•´</title>
      <link>https://hagemon.github.io/posts/clipin-log-4/</link>
      <pubDate>Sat, 09 Jan 2021 21:25:34 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/clipin-log-4/</guid>
      <description>é«˜äº®åŒºåŸŸçš„é€‰å– ç¡®å®šäº†é«˜äº®åŒºåŸŸçš„æ¸²æŸ“æ–¹å¼åï¼Œæˆ‘ä»¬åœ¨ClipWindowControllerä¸­æ·»åŠ å¯¹é¼ æ ‡äº‹ä»¶çš„ç›‘å¬ï¼Œç”¨äºè·å–é«˜äº®åŒºåŸŸã€‚
åœ¨ClipWindowControllerä¸­è®¾ç½®ä¸€äº›å˜é‡ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·æ“ä½œè¿‡ç¨‹ä¸­çš„ä¸€äº›NSPointå’ŒNSRectï¼š
class ClipWindowController: NSWindowController {    var clipView: ClipView?  var screenImage: NSImage?   var lastRect: NSRect? // ä¸Šä¸€ä¸ªå®Œæ•´çš„åŒºåŸŸï¼Œç”¨äºä¿å­˜æ‹–æ‹½æˆ–è°ƒæ•´å‰çš„åŒºåŸŸ  var highlightRect: NSRect? // å½“å‰é«˜äº®çš„åŒºåŸŸï¼Œé€šè¿‡é¼ æ ‡æ“ä½œåŠ¨æ€æ›´æ–°  var startPoint: NSPoint? // ä¸Šä¸€ä¸ªå®Œæ•´åŒºåŸŸçš„origin  var lastPoint: NSPoint? // ä¸Šä¸€æ¬¡æ›´æ–°åŒºåŸŸæ—¶é¼ æ ‡çš„ä½ç½®   // functions .... } å®ç°æ€è·¯ï¼š  é¼ æ ‡è½ä¸‹æ—¶çŠ¶æ€å˜ä¸ºstartï¼Œå¹¶è®°å½•è½ä¸‹ä½ç½®ä¸ºé«˜äº®åŒºåŸŸçš„startPoint é¼ æ ‡æ‹–æ‹½æ—¶é€šè¿‡å½“å‰ä½ç½®å’ŒstartPointåˆ›å»ºæ–°çš„Rectï¼Œç”¨äºæ›´æ–°highlightRect  å…¶ä¸­ç”¨åˆ°mouseDownã€mouseUpã€mouseDragè¿™ä¸‰ä¸ªäº‹ä»¶ç›‘å¬ï¼š
override func mouseDown(with event: NSEvent) {  let location = event.locationInWindow  switch ClipManager.shared.status {  case .</description>
    </item>
    
    <item>
      <title>Clipin Log 3. æˆªå±é¡µé¢çš„å®ç°</title>
      <link>https://hagemon.github.io/posts/clipin-log-3/</link>
      <pubDate>Sat, 09 Jan 2021 21:24:06 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/clipin-log-3/</guid>
      <description>å®ç°æ€è·¯  åˆ›å»ºå’Œå±å¹•å¤§å°ç›¸ç­‰çš„NSWindowï¼Œä¸”æ‹¥æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š  borderless contentviewé€æ˜èƒŒæ™¯ levelåœ¨å…¶ä½™çª—å£ä¹‹ä¸Š   æ•æ‰é«˜äº®åŒºåŸŸ é‡è½½NSWindow.contentViewä¸­çš„drawæ–¹æ³•ï¼Œæ¸²æŸ“é«˜äº®åŒºåŸŸçš„å›¾åƒè¦†ç›–èƒŒæ™¯ æŒ‰ä¸‹ESCé€€å‡ºClip æŒ‰ä¸‹Enterå®Œæˆå¯¹é«˜äº®åŒºåŸŸå›¾åƒçš„è·å– ç”¨NSWindowControlleræ§åˆ¶ä»¥ä¸Šè¡Œä¸º  å®ç°è¿‡ç¨‹ åˆ›å»ºNSWindowControllerï¼ŒNSWindowï¼ŒNSViewå¯¹åº”çš„å­ç±»ã€‚
åœ¨ClipManager.shared.start()ä¸­åˆ›å»ºæ§åˆ¶å™¨ã€çª—å£å’Œé¡µé¢çš„å¯¹è±¡å¹¶å»ºç«‹å…³ç³»ï¼š
func start() { 	guard let screen = NSScreen.main else { return } // å•æ˜¾ç¤ºå™¨ç¯å¢ƒ 	NSApplication.shared.activate(ignoringOtherApps: true) // åœ¨è§¦å‘å¿«æ·é”®åæ¿€æ´»Appï¼Œä½¿å¼€å¯çš„çª—å£èƒ½å¤Ÿå˜ä¸ºkey window  let view = ClipView(frame: screen.frame)  let clipWindow = ClipWindow(contentRect: screen.frame, contentView: view)  let clipWindowController = ClipWindowController(window: clipWindow)  self.controllers.append(clipWindowController) // å°†å…¶åŠ å…¥å½“å‰ä¿å­˜çš„æ§åˆ¶å™¨ä¸­  self.status = .ready  clipWindowController.capture(screen) } ClipWindowçš„æ¡ä»¶åœ¨åˆå§‹åŒ–æ—¶æ—¢å¯ä»¥æ»¡è¶³ï¼š</description>
    </item>
    
    <item>
      <title>Clipin Log 2. æˆªå±ç®¡ç†å™¨</title>
      <link>https://hagemon.github.io/posts/clipin-log-2/</link>
      <pubDate>Sat, 09 Jan 2021 21:13:22 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/clipin-log-2/</guid>
      <description>Manager/ClipManager.swift
æˆªå±çŠ¶æ€ enum ClipStatus {  case off // æœªå¼€å¯  case ready // å°±ç»ª  case start // å¼€å§‹é€‰æ‹©åŒºåŸŸ  case select // å·²é€‰æ‹©åŒºåŸŸ  case adjust // è°ƒæ•´åŒºåŸŸå¤§å°  case drag // æ‹–æ‹½åŒºåŸŸ } æˆªå±çš„çŠ¶æ€è½¬ç§»å¯ä»¥è¡¨è¿°ä¸ºä¸‹å›¾
å•ä¾‹ ä½¿ç”¨å•ä¾‹æ¥æ§åˆ¶Clipçš„æ“ä½œï¼š
import Cocoa  class ClipManager {   static let shared = ClipManager() // å•ä¾‹  var status: ClipStatus = .off // Clipåˆå§‹çŠ¶æ€ 	var controllers: [ClipWindowController] = [] // ä¿å­˜å½“å‰æ‰“å¼€çš„æ‰€æœ‰æ§åˆ¶å™¨   private init() {  NotificationCenter.</description>
    </item>
    
    <item>
      <title>Clipin Log 1. åŸºäºStatus Barçš„åº”ç”¨&amp;ç›‘å¬å¿«æ·é”®</title>
      <link>https://hagemon.github.io/posts/clipin-log-1/</link>
      <pubDate>Sat, 09 Jan 2021 20:53:34 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/clipin-log-1/</guid>
      <description>åˆ›å»ºä¸€ä¸ªåŸºäºStatus Barçš„åº”ç”¨ åŸºäºStatus Barçš„åº”ç”¨ä¸éœ€è¦è®¾ç½®é¢å¤–çš„UIï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨StoryBoardï¼Œåªè¦åœ¨AppDelegateä¸­é…ç½®å¥½ç›¸åº”çš„StatusBarItemå³å¯ã€‚
Storyboard ç”±äºæ˜¯åŸºäºStatus Barçš„åº”ç”¨ï¼Œæ‰€ä»¥åœ¨Storyboardä¸­å°†é¡µé¢ç›¸å…³çš„ç»„ä»¶éƒ½åˆ é™¤äº†ï¼Œä¿ç•™äº†Menuç›¸å…³çš„ç»„ä»¶ã€‚
é…ç½®info.plist åœ¨info.plistä¸­æ·»åŠ åä¸ºApplication is agent (UIElement)çš„keyï¼Œå¹¶å°†valueå€¼è®¾ç½®ä¸ºYESã€‚è¿™æ ·Appå°±ä¸ä¼šåœ¨Dockä¸­æ˜¾ç¤º
AppDelegate åœ¨AppDelegateä¸­åˆ›å»ºStatusBaræŒ‰é’®å¹¶é…ç½®å¯¹åº”çš„action
import Cocoa  @main class AppDelegate: NSObject, NSApplicationDelegate {   let statusItem = NSStatusBar.system.statusItem(withLength:NSStatusItem.squareLength)   func applicationDidFinishLaunching(_ aNotification: Notification) {  guard let button = self.statusItem.button else { return }  button.image = NSImage(named: NSImage.Name(&amp;#34;StatusBarIcon&amp;#34;)) // StatusBarIcon is in Assets.xcassets  button.action = #selector(showMenu)  }   func applicationWillTerminate(_ aNotification: Notification) {  // Insert code here to tear down your application  }   @objc func showMenu() {//to be do} } ç›‘å¬å¿«æ·é”® åŸºäºHotKeyå®ç°å¯¹å…¨å‰§å¿«æ·é”®çš„ç›‘å¬ï¼ŒHotKeyåº•å±‚ä½¿ç”¨äº†Carbonçš„RegisterEventHotKeyæ¥å£ï¼š</description>
    </item>
    
    <item>
      <title>Clipin Log 0. Mac OSä¸Šæˆªå›¾&amp;ä¿ç•™å°å·¥å…·çš„å¼€å‘è®°å½•</title>
      <link>https://hagemon.github.io/posts/clipin-log-0/</link>
      <pubDate>Sat, 09 Jan 2021 20:50:05 +0000</pubDate>
      
      <guid>https://hagemon.github.io/posts/clipin-log-0/</guid>
      <description>æºç åœ°å€ï¼šhttps://github.com/hagemon/Clipin
æºç çš„ç‰ˆæœ¬ä¸ºSwift 5.0ã€‚
æˆ‘ä»¬å°†æˆªå›¾æ“ä½œç§°ä¸ºClipï¼Œå°†æˆªå›¾é’‰åœ¨å±å¹•ä¸Šçš„æ“ä½œç§°ä¸ºPinã€‚
è¯¥å·¥å…·å¯ä»¥ä¸´æ—¶å°†ä¸€äº›éœ€è¦å¯¹ç…§çš„ä¿¡æ¯ä¿æŒåœ¨å±å¹•æœ€ä¸Šæ–¹ï¼Œï¼ˆæˆ–è®¸ï¼‰èƒ½æé«˜å·¥ä½œæ•ˆç‡ã€‚
è¯¥å·¥å…·åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‚è€ƒäº†Snipçš„æºç ï¼Œä¸”é›†æˆäº†HotKeyå¼€æºåº“ç›‘å¬å¿«æ·é”®ã€‚
æœ¬æ–‡ç« æ˜¯ä½œè€…åœ¨å¼€å‘è¯¥å·¥å…·è¿‡ç¨‹ä¸­çš„è®°å½•ï¼Œç”±ç®€å…¥ç¹åœ°ä»‹ç»è¯¥å·¥å…·çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå¦‚æ–‡ä¸­æœ‰çº°æ¼æˆ–æ˜¯ä¸å¥åº·çš„ä»£ç ï¼Œè¿˜è¯·å„ä½èµæ•™ã€‚ğŸ˜‹
æœ¬å·¥å…·è¿˜ä¼šæŒç»­åœ°å¼€å‘å’Œç»´æŠ¤ï¼Œè¯¥æ–‡ç« ä¹Ÿä¼šä¸æ–­åœ°æ›´æ–°å’Œä¿®æ”¹ã€‚
é¡¹ç›®æ¶æ„ä»‹ç» æ ¹æ®ä½œè€…ä¸ªäººçš„ä¹ æƒ¯ï¼Œå°†é¡¹ç›®åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š
 Utilï¼šä¸€äº›å·¥å…·ç±»ã€å‡½æ•°ã€æšä¸¾å’Œæ‰©å±• Managerï¼šç®¡ç†Clipã€Pinæ“ä½œè¿‡ç¨‹çš„å•ä¾‹ç®¡ç†å™¨ Clipï¼šClipåŠŸèƒ½ç›¸å…³çš„Controllerå’ŒView Pinï¼šPinåŠŸèƒ½ç›¸å…³çš„Controllerå’ŒView  Status baråº”ç”¨çš„ç›¸å…³é…ç½®å’Œå¿«æ·é”®ç›‘å¬ç­‰åŠŸèƒ½åœ¨AppDelegate.swiftä¸­å®ç°ã€‚
é¦–å…ˆè¿›å…¥Status Baråº”ç”¨&amp;amp;ç›‘å¬å¿«æ·é”®ã€‚</description>
    </item>
    
  </channel>
</rss>
